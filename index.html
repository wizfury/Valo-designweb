<!DOCTYPE html>
<html>
    <head>

        <link rel="stylesheet" href="styles.css"/>
        <link rel="preconnect" href="https://fonts.googleapis.com">
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400..900&display=swap" rel="stylesheet">
    <body>
        <img src="anim/valo-logo.png" id="main-logo" alt="spacex"/>
        <h1>Watch your <span class="underline">Back</span></h1>
        <button class="btn" id="start-btn">Let's begin</button>
     


        <audio id="bg-music" autoplay loop playsinline preload="auto">
            <source src="anim/valorant.mp3" type="audio/mpeg">
        </audio>

        <!-- <script>
            const audio = document.getElementById('bg-music');
            const logo= document.getElementById('main-logo');
            const startbtn = document.getElementById('start-btn');
            let started= false;

            // window.addEventListener('load', async () => {
            //     try{
            //         await audio.play();
            //         console.log("Audio playback started successfully");
            //     }
            //     catch(err){
            //         console.log("Audio playback failed:", err);
            //     } 
            // });

            startbtn.addEventListener(
                'click', async () => {
                    try {
                        await audio.play();
                        logo.classList.add('animate');
                        startbtn.style.display="none" // optional: unmute immediately on button press
                        console.log('audio + animation started');
                    } catch (err) {
                        console.error('Start button play failed:', err);
                    }

                }
            );

            // unmutebtm.addEventListener('click', async () => {
            //     try {
            //         audio.muted = false;
            //         await audio.play();
            //         console.log('Unmuted and playing.');
            //     } catch (err) {
            //         console.error('Unmute failed:', err);
            //     }
            // });
        </script> -->

        <script>
     const gifs = [
    "anim/endeye.gif",
    "anim/1.\ astra.gif",
    "anim/2.\ Phoenix.gif",
    "anim/3.\ reyna.gif",
    "anim/6.jett.gif",
    "anim/sova.gif",
    "anim/raze.gif",
    "anim/omenn.gif",
    "anim/flesh.gif",
    "anim/viper.gif",
    "anim/iso.gif",
    "anim/cypher.gif",
    "anim/Space\ Glow\ GIF\ by\ Erica\ Anderson.gif",
    
  ];

   const audio = document.getElementById("bg-music");
    const logo = document.getElementById("main-logo");
    const startBtn = document.getElementById("start-btn");

    let loaded = 0;

    // preload gifs
    gifs.forEach(src => {
      const img = new Image();
      img.src = src;
      img.onload = () => {
        loaded++;
        if (loaded === gifs.length) {
          console.log("All GIFs preloaded!");
          startBtn.disabled = false; // enable button once ready
          startBtn.textContent = "Let's begin"; // update button text
        }
      };
    });

    // preload audio
    audio.addEventListener("canplaythrough", () => {
      loaded++;
      checkAllLoaded();
    }, { once: true });

    function checkAllLoaded() {
      if (loaded === totalAssets) {
        console.log("All GIFs + audio preloaded!");
        startBtn.disabled = false;
        startBtn.textContent = "Start Experience";
      }
    }

    // user clicks start
    startBtn.addEventListener("click", async () => {
      try {
        await audio.play();
        document.body.classList.add("start"); // start background animation
        logo.classList.add("animate");        // start logo animation
        startBtn.style.display = "none";      // hide button
      } catch (err) {
        console.error("Audio play blocked:", err);
      }
    });
  </script>
    </body>
</html>